<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<!--
  Aras.HTML5 provides a HTML5 client library to build Aras Innovator Applications

  Copyright (C) 2015 Processwall Limited.

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see http://opensource.org/licenses/AGPL-3.0.
 
  Company: Processwall Limited
  Address: The Winnowing House, Mill Lane, Askham Richard, York, YO23 3NW, United Kingdom
  Tel:     +44 113 815 3440
  Email:   support@processwall.com
-->

<!--

// Method to Open Part BOM Editor

// Create Options
var options = { dialogWidth: 800, dialogHeight: 600 };

// Create Paramters
var param = { aras: top.aras, title: 'Part BOM Editor' };

// Get Window
var wnd = top.aras.getMainWindow();
wnd = wnd === top ? wnd.main : top;

// Create Callback
var callback = null;

// Open Part BOM Editor
top.aras.modalDialogHelper.show('DefaultPopup', wnd, param, options, '../../../AAD/Client/Plugins/Aras/Design/PartBOMEditor.html?itemid=' + this.getID(), callback);

return this;

-->

<html>
<head>
	<title>Part BOM Editor</title>
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		
	<meta http-equiv="cache-control" content="no-cache" />
		
	<style type="text/css">
		@import "../../../js/Aras/Themes/claro/claro.css";
	</style>
	
	<script>
		dojoConfig={
			has: {"dojo-firebug": true},
			parseOnLoad: false,
			async: true
		};
	</script>
		
	<script type="text/javascript" src="../../../js/dojo/dojo.js"></script>
	
	<script>
		require(['Aras/View/Design/Plugins/PartRelationshipTree', 'dojo/dom', 'dojo/io-query', 'dojo/domReady!'], function(PartRelationshipTree, dom, ioquery) {
			
			// Get Aras Top
			var aras = (opener ? opener.top.aras : top.aras);
			
			// Remove Location Bar
			aras.browserHelper.hidePanels(window, ["locationbar"]);
			
			// Get ItemID
			var paramters  = ioquery.queryToObject(window.location.search.substring(1));

			// Get Target
			var target = dom.byId('main');			
			
			// Create Part Relationship Tree
			var partreltree = new PartRelationshipTree({ URL: '../../../..', TopAras: aras, Name: 'Aras.ViewModel.Design.PartRelationshipTree',  Context: paramters.itemid, style: 'width: 100%; height: 100%;'}, target);
			partreltree.startup();
		});
	</script>
	
</head>
	<body class='claro'>
		<div id='main'></div>
	</body>
</html>
